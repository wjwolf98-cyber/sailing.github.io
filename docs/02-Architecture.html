<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>系统架构设计</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            line-height: 1.8;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #1890ff;
            border-bottom: 3px solid #1890ff;
            padding-bottom: 10px;
        }
        h2 {
            color: #2c3e50;
            margin-top: 40px;
            border-left: 4px solid #1890ff;
            padding-left: 15px;
        }
        h3 {
            color: #34495e;
            margin-top: 30px;
        }
        h4 {
            color: #555;
            margin-top: 20px;
        }
        pre {
            background-color: #f6f8fa;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            padding: 16px;
            overflow-x: auto;
            line-height: 1.45;
        }
        code {
            background-color: #f6f8fa;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9em;
        }
        ul, ol {
            padding-left: 30px;
        }
        li {
            margin: 8px 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #1890ff;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        .toc {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 20px;
            margin: 20px 0;
        }
        .toc h2 {
            margin-top: 0;
            border-left: none;
        }
        .toc ul {
            list-style-type: none;
            padding-left: 0;
        }
        .toc ul ul {
            padding-left: 20px;
        }
        .toc a {
            color: #1890ff;
            text-decoration: none;
        }
        .toc a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>系统架构设计</h1>

        <h2 id="section-1">1. 架构概述</h2>
        
        <h3 id="section-1-1">1.1 架构原则</h3>
        <ul>
            <li><strong>微服务化</strong>: 按业务领域拆分服务，独立部署</li>
            <li><strong>云原生</strong>: 基于Kubernetes，支持弹性伸缩</li>
            <li><strong>高可用</strong>: 多可用区部署，故障自动切换</li>
            <li><strong>高性能</strong>: 缓存优化，异步处理，读写分离</li>
            <li><strong>安全合规</strong>: 等保三级，数据加密，权限控制</li>
            <li><strong>可观测</strong>: 全链路监控，日志追踪</li>
        </ul>

        <h3 id="section-1-2">1.2 架构风格</h3>
        <ul>
            <li>前后端分离</li>
            <li>微服务架构（Spring Cloud Alibaba）</li>
            <li>事件驱动架构（RocketMQ）</li>
            <li>CQRS（命令查询职责分离）</li>
            <li>DDD（领域驱动设计）</li>
        </ul>

        <h2 id="section-2">2. 总体架构</h2>
        <pre>
┌─────────────────────────────────────────────────────────────┐
│                         客户端层                              │
├──────────┬──────────┬──────────┬──────────┬─────────────────┤
│ 管理后台  │ 品牌平台  │ 渠道平台  │ 法律平台  │ 消费者商城      │
│ (React)  │ (React)  │ (React)  │ (React)  │ (React)         │
├──────────┴──────────┴──────────┴──────────┴─────────────────┤
│                    移动端 (React Native/Flutter)              │
├──────────┬──────────┬──────────────────────────────────────┤
│ 巡查APP   │ 监管APP   │ 消费者APP                             │
└──────────┴──────────┴──────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                         CDN层                                 │
│                    (阿里云CDN + OSS)                          │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                      接入层 (SLB)                             │
│                   负载均衡 + SSL卸载                          │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                    API网关层 (Spring Cloud Gateway)           │
├─────────────────────────────────────────────────────────────┤
│  路由 │ 鉴权 │ 限流 │ 熔断 │ 日志 │ 监控 │ 灰度发布          │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                      业务服务层 (微服务)                       │
├──────────┬──────────┬──────────┬──────────┬─────────────────┤
│ 认证服务  │ 品牌服务  │ 渠道服务  │ 巡查服务  │ 法律服务        │
├──────────┼──────────┼──────────┼──────────┼─────────────────┤
│ 专家服务  │ 纠纷服务  │ 商城服务  │ 证据服务  │ AI服务          │
├──────────┼──────────┼──────────┼──────────┼─────────────────┤
│ 消息服务  │ 文件服务  │ 搜索服务  │ 数据服务  │ 工作流服务      │
└──────────┴──────────┴──────────┴──────────┴─────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                      中间件层                                 │
├──────────┬──────────┬──────────┬──────────┬─────────────────┤
│ Nacos    │ Sentinel │ Seata    │RocketMQ  │ Redis           │
│ (注册)   │ (限流)   │ (事务)   │ (消息)   │ (缓存)          │
└──────────┴──────────┴──────────┴──────────┴─────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                      数据层                                   │
├──────────┬──────────┬──────────┬──────────┬─────────────────┤
│ MySQL    │ MongoDB  │Elasticsearch│ OSS   │ 区块链          │
│ (关系)   │ (文档)   │ (搜索)   │ (存储)   │ (存证)          │
└──────────┴──────────┴──────────┴──────────┴─────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                      基础设施层                               │
├─────────────────────────────────────────────────────────────┤
│              Kubernetes (ACK) + Docker                        │
│              阿里云 (ECS, RDS, SLB, OSS, etc.)               │
└─────────────────────────────────────────────────────────────┘
        </pre>

        <h2 id="section-3">3. 微服务架构</h2>
        
        <h3 id="section-3-1">3.1 服务划分</h3>
        
        <h4 id="section-3-1-1">3.1.1 基础服务</h4>
        
        <p><strong>auth-service (认证授权服务)</strong></p>
        <ul>
            <li>用户认证（OAuth 2.0 + JWT）</li>
            <li>权限管理（RBAC）</li>
            <li>单点登录（SSO）</li>
            <li>多租户管理</li>
            <li>身份核验（公安API）</li>
        </ul>

        <p><strong>gateway-service (API网关)</strong></p>
        <ul>
            <li>路由转发</li>
            <li>认证鉴权</li>
            <li>限流熔断</li>
            <li>日志记录</li>
            <li>灰度发布</li>
            <li>API聚合</li>
        </ul>

        <p><strong>config-service (配置中心)</strong></p>
        <ul>
            <li>集中配置管理</li>
            <li>动态配置更新</li>
            <li>配置版本管理</li>
            <li>环境隔离</li>
        </ul>

        <h4 id="section-3-1-2">3.1.2 业务服务</h4>
        
        <p><strong>brand-service (品牌管理服务)</strong></p>
        <ul>
            <li>品牌信息管理</li>
            <li>权属管理（商标/专利/著作权）</li>
            <li>授权体系管理</li>
            <li>代理商审核</li>
            <li>广告合规管理</li>
            <li>权利预警</li>
        </ul>

        <p><strong>channel-service (渠道管理服务)</strong></p>
        <ul>
            <li>渠道商入驻</li>
            <li>资质审核</li>
            <li>托管协议管理</li>
            <li>销售数据采集</li>
            <li>绩效分析</li>
            <li>合规监控</li>
        </ul>

        <p><strong>inspection-service (巡查服务)</strong></p>
        <ul>
            <li>巡查任务管理</li>
            <li>线下巡查</li>
            <li>电商监测</li>
            <li>证据采集</li>
            <li>巡查报告</li>
            <li>问题上报</li>
        </ul>

        <p><strong>legal-service (法律服务)</strong></p>
        <ul>
            <li>案件管理</li>
            <li>律师管理</li>
            <li>文书管理</li>
            <li>案件分配</li>
            <li>进度跟踪</li>
            <li>绩效考核</li>
        </ul>

        <p><strong>expert-service (专家服务)</strong></p>
        <ul>
            <li>专家管理</li>
            <li>鉴定管理</li>
            <li>咨询服务</li>
            <li>标准管理</li>
            <li>培训管理</li>
            <li>知识库</li>
        </ul>

        <p><strong>dispute-service (纠纷处理服务)</strong></p>
        <ul>
            <li>调解管理</li>
            <li>仲裁管理</li>
            <li>庭审管理</li>
            <li>方案推荐</li>
            <li>文书生成</li>
            <li>执行跟踪</li>
        </ul>

        <p><strong>mall-service (商城服务)</strong></p>
        <ul>
            <li>商品管理</li>
            <li>订单管理</li>
            <li>支付集成</li>
            <li>物流跟踪</li>
            <li>售后服务</li>
            <li>评价管理</li>
        </ul>

        <p><strong>evidence-service (证据链服务)</strong></p>
        <ul>
            <li>证据采集</li>
            <li>区块链存证</li>
            <li>证据校验</li>
            <li>电子签章</li>
            <li>时间戳服务</li>
            <li>存证查询</li>
        </ul>

        <p><strong>ai-service (AI服务)</strong></p>
        <ul>
            <li>文书生成</li>
            <li>图像识别</li>
            <li>OCR识别</li>
            <li>语音识别</li>
            <li>NLP处理</li>
            <li>智能推荐</li>
        </ul>

        <h4 id="section-3-1-3">3.1.3 支撑服务</h4>
        
        <p><strong>message-service (消息服务)</strong></p>
        <ul>
            <li>站内消息</li>
            <li>短信通知</li>
            <li>邮件通知</li>
            <li>推送通知</li>
            <li>消息模板</li>
        </ul>

        <p><strong>file-service (文件服务)</strong></p>
        <ul>
            <li>文件上传</li>
            <li>文件下载</li>
            <li>图片处理</li>
            <li>视频处理</li>
            <li>文件预览</li>
        </ul>

        <p><strong>search-service (搜索服务)</strong></p>
        <ul>
            <li>全文搜索</li>
            <li>商品搜索</li>
            <li>案件搜索</li>
            <li>智能推荐</li>
        </ul>

        <p><strong>data-service (数据服务)</strong></p>
        <ul>
            <li>数据统计</li>
            <li>报表生成</li>
            <li>数据导出</li>
            <li>数据分析</li>
        </ul>

        <p><strong>workflow-service (工作流服务)</strong></p>
        <ul>
            <li>流程定义</li>
            <li>流程执行</li>
            <li>任务管理</li>
            <li>审批管理</li>
        </ul>

        <h3 id="section-3-2">3.2 服务通信</h3>
        
        <h4 id="section-3-2-1">3.2.1 同步通信</h4>
        <ul>
            <li><strong>HTTP/REST</strong>: 外部API调用</li>
            <li><strong>Dubbo</strong>: 内部服务调用（高性能）</li>
            <li><strong>gRPC</strong>: 跨语言服务调用</li>
        </ul>

        <h4 id="section-3-2-2">3.2.2 异步通信</h4>
        <ul>
            <li><strong>RocketMQ</strong>: 事件驱动，解耦服务</li>
            <li><strong>消息类型</strong>:
                <ul>
                    <li>普通消息: 业务通知</li>
                    <li>顺序消息: 状态变更</li>
                    <li>事务消息: 分布式事务</li>
                    <li>延时消息: 定时任务</li>
                </ul>
            </li>
        </ul>

        <h3 id="section-3-3">3.3 服务治理</h3>
        
        <h4 id="section-3-3-1">3.3.1 服务注册与发现</h4>
        <ul>
            <li><strong>Nacos</strong>: 服务注册中心</li>
            <li>健康检查</li>
            <li>服务元数据管理</li>
            <li>动态配置</li>
        </ul>

        <h4 id="section-3-3-2">3.3.2 负载均衡</h4>
        <ul>
            <li><strong>客户端负载均衡</strong>: Ribbon</li>
            <li><strong>服务端负载均衡</strong>: SLB</li>
            <li>负载策略: 轮询、随机、权重、最少连接</li>
        </ul>

        <h4 id="section-3-3-3">3.3.3 熔断降级</h4>
        <ul>
            <li><strong>Sentinel</strong>: 流量控制</li>
            <li>熔断策略: 慢调用比例、异常比例、异常数</li>
            <li>降级策略: 返回默认值、返回缓存、快速失败</li>
        </ul>

        <h4 id="section-3-3-4">3.3.4 分布式事务</h4>
        <ul>
            <li><strong>Seata</strong>: 分布式事务解决方案</li>
            <li>AT模式: 自动补偿</li>
            <li>TCC模式: 手动补偿</li>
            <li>SAGA模式: 长事务</li>
        </ul>

        <h2 id="section-4">4. 数据架构</h2>
        
        <h3 id="section-4-1">4.1 数据分层</h3>
        <pre>
┌─────────────────────────────────────────┐
│            应用层 (Application)          │
│         业务逻辑 + 数据访问              │
└─────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│            缓存层 (Cache)                │
│         Redis (热数据 + 会话)            │
└─────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│            存储层 (Storage)              │
├──────────┬──────────┬───────────────────┤
│  MySQL   │ MongoDB  │  Elasticsearch    │
│ (关系)   │ (文档)   │   (搜索)          │
└──────────┴──────────┴───────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│            归档层 (Archive)              │
│         OSS (冷数据 + 文件)              │
└─────────────────────────────────────────┘
        </pre>

        <h3 id="section-4-2">4.2 数据库设计</h3>
        
        <h4 id="section-4-2-1">4.2.1 MySQL (关系型数据)</h4>
        <ul>
            <li><strong>用户数据</strong>: 用户、角色、权限</li>
            <li><strong>业务数据</strong>: 品牌、渠道、订单、案件</li>
            <li><strong>配置数据</strong>: 系统配置、字典</li>
            <li><strong>分库分表</strong>: 按租户ID分库，按时间分表</li>
        </ul>

        <h4 id="section-4-2-2">4.2.2 MongoDB (文档型数据)</h4>
        <ul>
            <li><strong>日志数据</strong>: 操作日志、审计日志</li>
            <li><strong>非结构化数据</strong>: 巡查报告、鉴定报告</li>
            <li><strong>大字段数据</strong>: 文书内容、评论</li>
        </ul>

        <h4 id="section-4-2-3">4.2.3 Redis (缓存数据)</h4>
        <ul>
            <li><strong>热点数据</strong>: 商品信息、用户信息</li>
            <li><strong>会话数据</strong>: 登录状态、权限缓存</li>
            <li><strong>计数器</strong>: 访问量、库存</li>
            <li><strong>分布式锁</strong>: 防重复提交</li>
        </ul>

        <h4 id="section-4-2-4">4.2.4 Elasticsearch (搜索数据)</h4>
        <ul>
            <li><strong>全文搜索</strong>: 商品、案件、文书</li>
            <li><strong>日志分析</strong>: 业务日志、系统日志</li>
            <li><strong>实时分析</strong>: 数据统计、报表</li>
        </ul>

        <h3 id="section-4-3">4.3 数据同步</h3>
        
        <h4 id="section-4-3-1">4.3.1 实时同步</h4>
        <ul>
            <li><strong>Canal</strong>: MySQL binlog订阅</li>
            <li><strong>同步到</strong>: Redis、Elasticsearch、MongoDB</li>
            <li><strong>用途</strong>: 缓存更新、搜索索引、数据分析</li>
        </ul>

        <h4 id="section-4-3-2">4.3.2 离线同步</h4>
        <ul>
            <li><strong>DataX</strong>: 批量数据同步</li>
            <li><strong>同步到</strong>: 数据仓库、大数据平台</li>
            <li><strong>用途</strong>: 数据分析、报表生成</li>
        </ul>

        <h3 id="section-4-4">4.4 数据安全</h3>
        
        <h4 id="section-4-4-1">4.4.1 数据加密</h4>
        <ul>
            <li><strong>传输加密</strong>: TLS 1.3</li>
            <li><strong>存储加密</strong>: AES-256</li>
            <li><strong>敏感字段</strong>: 手机号、身份证、银行卡</li>
        </ul>

        <h4 id="section-4-4-2">4.4.2 数据脱敏</h4>
        <ul>
            <li><strong>展示脱敏</strong>: 手机号中间4位</li>
            <li><strong>日志脱敏</strong>: 敏感信息替换</li>
            <li><strong>导出脱敏</strong>: 批量数据处理</li>
        </ul>

        <h4 id="section-4-4-3">4.4.3 数据备份</h4>
        <ul>
            <li><strong>全量备份</strong>: 每日凌晨</li>
            <li><strong>增量备份</strong>: 实时binlog</li>
            <li><strong>异地备份</strong>: 多可用区</li>
            <li><strong>保留策略</strong>: 30天</li>
        </ul>

        <h2 id="section-5">5. 技术架构</h2>
        
        <h3 id="section-5-1">5.1 后端技术栈</h3>
        <pre>
┌─────────────────────────────────────────┐
│           Spring Cloud Alibaba          │
├──────────┬──────────┬───────────────────┤
│  Nacos   │ Sentinel │     Seata         │
│ (注册)   │ (限流)   │    (事务)         │
└──────────┴──────────┴───────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│              Spring Boot 3.x            │
├──────────┬──────────┬───────────────────┤
│Spring Web│Spring    │  Spring           │
│          │Security  │  Data JPA         │
└──────────┴──────────┴───────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│              持久层框架                  │
├──────────┬──────────┬───────────────────┤
│ MyBatis  │  JPA     │   MongoDB         │
│  Plus    │          │   Driver          │
└──────────┴──────────┴───────────────────┘
        </pre>

        <p><strong>核心框架</strong>:</p>
        <ul>
            <li>Spring Boot 3.2+</li>
            <li>Spring Cloud Alibaba 2023.x</li>
            <li>Dubbo 3.2+</li>
            <li>MyBatis Plus 3.5+</li>
        </ul>

        <p><strong>工具库</strong>:</p>
        <ul>
            <li>Lombok: 简化代码</li>
            <li>MapStruct: 对象映射</li>
            <li>Hutool: 工具类</li>
            <li>Guava: 集合增强</li>
        </ul>

        <h3 id="section-5-2">5.2 前端技术栈</h3>
        <pre>
┌─────────────────────────────────────────┐
│              React 18+                  │
├──────────┬──────────┬───────────────────┤
│  Ant     │  Umi.js  │   ProComponents   │
│ Design   │          │                   │
└──────────┴──────────┴───────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│            状态管理 + 路由               │
├──────────┬──────────┬───────────────────┤
│  Redux   │  React   │   Axios           │
│ Toolkit  │  Router  │                   │
└──────────┴──────────┴───────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│              构建工具                    │
├──────────┬──────────┬───────────────────┤
│  Vite    │  Webpack │   TypeScript      │
└──────────┴──────────┴───────────────────┘
        </pre>

        <p><strong>核心框架</strong>:</p>
        <ul>
            <li>React 18+</li>
            <li>Ant Design Pro 6+</li>
            <li>Umi.js 4+</li>
            <li>TypeScript 5+</li>
        </ul>

        <p><strong>工具库</strong>:</p>
        <ul>
            <li>Axios: HTTP客户端</li>
            <li>Day.js: 日期处理</li>
            <li>Lodash: 工具函数</li>
            <li>Echarts: 数据可视化</li>
        </ul>

        <h3 id="section-5-3">5.3 移动端技术栈</h3>
        
        <p><strong>React Native</strong>:</p>
        <ul>
            <li>React Native 0.73+</li>
            <li>React Navigation</li>
            <li>Redux Toolkit</li>
            <li>Ant Design Mobile</li>
        </ul>

        <p><strong>Flutter</strong>:</p>
        <ul>
            <li>Flutter 3.16+</li>
            <li>GetX: 状态管理</li>
            <li>Dio: 网络请求</li>
            <li>Provider: 依赖注入</li>
        </ul>

        <h3 id="section-5-4">5.4 中间件技术栈</h3>
        <ul>
            <li><strong>注册中心</strong>: Nacos 2.3+</li>
            <li><strong>配置中心</strong>: Nacos 2.3+</li>
            <li><strong>服务网关</strong>: Spring Cloud Gateway 4.x</li>
            <li><strong>限流熔断</strong>: Sentinel 1.8+</li>
            <li><strong>分布式事务</strong>: Seata 2.0+</li>
            <li><strong>消息队列</strong>: RocketMQ 5.1+</li>
            <li><strong>缓存</strong>: Redis 7.2+</li>
            <li><strong>搜索引擎</strong>: Elasticsearch 8.11+</li>
            <li><strong>任务调度</strong>: XXL-Job 2.4+</li>
        </ul>

        <h2 id="section-6">6. 部署架构</h2>
        
        <h3 id="section-6-1">6.1 容器化部署</h3>
        <pre>
┌─────────────────────────────────────────┐
│              Kubernetes (ACK)           │
├──────────┬──────────┬───────────────────┤
│ Ingress  │  Service │     Pod           │
│ (入口)   │ (服务)   │   (容器)          │
└──────────┴──────────┴───────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│              Docker                     │
├──────────┬──────────┬───────────────────┤
│  镜像    │  容器    │    网络           │
└──────────┴──────────┴───────────────────┘
        </pre>

        <ul>
            <li><strong>容器编排</strong>: Kubernetes (ACK)</li>
            <li><strong>容器运行时</strong>: Docker / Containerd</li>
            <li><strong>镜像仓库</strong>: 阿里云容器镜像服务 (ACR)</li>
            <li><strong>服务网格</strong>: Istio (可选)</li>
        </ul>

        <h3 id="section-6-2">6.2 多环境部署</h3>
        <pre>
开发环境 (DEV)
    ↓
测试环境 (TEST)
    ↓
预发环境 (PRE)
    ↓
生产环境 (PROD)
    ├─ 可用区A
    ├─ 可用区B
    └─ 可用区C
        </pre>

        <h3 id="section-6-3">6.3 高可用部署</h3>
        
        <p><strong>多可用区部署</strong>:</p>
        <ul>
            <li>应用服务: 3个可用区，每区2+实例</li>
            <li>数据库: 主从复制，跨可用区</li>
            <li>缓存: Redis集群，跨可用区</li>
            <li>消息队列: 集群模式，跨可用区</li>
        </ul>

        <p><strong>负载均衡</strong>:</p>
        <ul>
            <li>外部: SLB (公网/内网)</li>
            <li>内部: Kubernetes Service</li>
        </ul>

        <p><strong>自动伸缩</strong>:</p>
        <ul>
            <li>HPA: 基于CPU/内存自动扩缩容</li>
            <li>VPA: 垂直扩缩容</li>
            <li>Cluster Autoscaler: 节点自动扩缩容</li>
        </ul>

        <h2 id="section-7">7. 安全架构</h2>
        
        <h3 id="section-7-1">7.1 网络安全</h3>
        <pre>
Internet
    ↓
WAF (Web应用防火墙)
    ↓
SLB (负载均衡)
    ↓
VPC (专有网络)
    ├─ 公网子网 (DMZ)
    │   └─ API Gateway
    ├─ 应用子网
    │   └─ 微服务
    └─ 数据子网
        └─ 数据库
        </pre>

        <ul>
            <li><strong>安全组</strong>: 最小权限原则</li>
            <li><strong>VPC</strong>: 网络隔离</li>
            <li><strong>WAF</strong>: 防SQL注入、XSS攻击</li>
            <li><strong>DDoS防护</strong>: 高防IP</li>
        </ul>

        <h3 id="section-7-2">7.2 应用安全</h3>
        
        <p><strong>认证授权</strong>:</p>
        <ul>
            <li>OAuth 2.0 + JWT</li>
            <li>RBAC权限模型</li>
            <li>多因素认证 (MFA)</li>
        </ul>

        <p><strong>数据安全</strong>:</p>
        <ul>
            <li>传输加密: TLS 1.3</li>
            <li>存储加密: AES-256</li>
            <li>数据脱敏: 敏感信息处理</li>
        </ul>

        <p><strong>审计日志</strong>:</p>
        <ul>
            <li>操作日志: 谁、何时、做了什么</li>
            <li>审计日志: 敏感操作记录</li>
            <li>日志保留: 180天</li>
        </ul>

        <h3 id="section-7-3">7.3 合规认证</h3>
        <ul>
            <li><strong>等保三级</strong>: 信息安全等级保护</li>
            <li><strong>ISO 27001</strong>: 信息安全管理体系</li>
            <li><strong>PCI DSS</strong>: 支付卡行业数据安全标准 (如涉及支付)</li>
        </ul>

        <h2 id="section-8">8. 监控架构</h2>
        
        <h3 id="section-8-1">8.1 监控体系</h3>
        <pre>
┌─────────────────────────────────────────┐
│              应用监控 (ARMS)             │
│     性能监控 + 链路追踪 + 异常监控       │
└─────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│              日志服务 (SLS)              │
│        日志采集 + 分析 + 告警            │
└─────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│            云监控 (CloudMonitor)         │
│      基础设施监控 + 资源监控             │
└─────────────────────────────────────────┘
                    ↓
┌─────────────────────────────────────────┐
│              告警中心                    │
│      短信 + 邮件 + 钉钉 + 电话           │
└─────────────────────────────────────────┘
        </pre>

        <h3 id="section-8-2">8.2 监控指标</h3>
        
        <p><strong>应用层</strong>:</p>
        <ul>
            <li>QPS/TPS</li>
            <li>响应时间 (P50/P95/P99)</li>
            <li>错误率</li>
            <li>慢SQL</li>
            <li>JVM指标</li>
        </ul>

        <p><strong>基础设施层</strong>:</p>
        <ul>
            <li>CPU使用率</li>
            <li>内存使用率</li>
            <li>磁盘IO</li>
            <li>网络流量</li>
            <li>容器状态</li>
        </ul>

        <p><strong>业务层</strong>:</p>
        <ul>
            <li>用户活跃度</li>
            <li>订单量</li>
            <li>案件处理量</li>
            <li>转化率</li>
        </ul>

        <h3 id="section-8-3">8.3 链路追踪</h3>
        <ul>
            <li><strong>OpenTelemetry</strong>: 分布式追踪</li>
            <li><strong>Trace ID</strong>: 全链路追踪</li>
            <li><strong>Span</strong>: 服务调用跨度</li>
            <li><strong>可视化</strong>: Jaeger / Zipkin</li>
        </ul>

        <h2 id="section-9">9. 灾备架构</h2>
        
        <h3 id="section-9-1">9.1 备份策略</h3>
        
        <p><strong>数据备份</strong>:</p>
        <ul>
            <li>全量备份: 每日</li>
            <li>增量备份: 实时</li>
            <li>异地备份: 跨地域</li>
        </ul>

        <p><strong>应用备份</strong>:</p>
        <ul>
            <li>镜像备份: 版本化</li>
            <li>配置备份: Git管理</li>
        </ul>

        <h3 id="section-9-2">9.2 容灾方案</h3>
        
        <p><strong>同城容灾</strong>:</p>
        <ul>
            <li>多可用区部署</li>
            <li>自动故障切换</li>
            <li>RTO: 5分钟</li>
            <li>RPO: 0</li>
        </ul>

        <p><strong>异地容灾</strong>:</p>
        <ul>
            <li>异地数据中心</li>
            <li>数据异步复制</li>
            <li>RTO: 30分钟</li>
            <li>RPO: 5分钟</li>
        </ul>

        <h3 id="section-9-3">9.3 应急预案</h3>
        
        <p><strong>故障分级</strong>:</p>
        <ul>
            <li>P0: 核心功能不可用</li>
            <li>P1: 重要功能受影响</li>
            <li>P2: 次要功能异常</li>
            <li>P3: 体验问题</li>
        </ul>

        <p><strong>应急流程</strong>:</p>
        <ol>
            <li>故障发现</li>
            <li>快速定位</li>
            <li>应急处理</li>
            <li>服务恢复</li>
            <li>复盘总结</li>
        </ol>

        <h2 id="section-10">10. 演进路线</h2>
        
        <h3 id="section-10-1">10.1 Phase 1: 单体到微服务</h3>
        <ul>
            <li>服务拆分</li>
            <li>数据库拆分</li>
            <li>中间件引入</li>
        </ul>

        <h3 id="section-10-2">10.2 Phase 2: 云原生改造</h3>
        <ul>
            <li>容器化</li>
            <li>Kubernetes编排</li>
            <li>服务网格</li>
        </ul>

        <h3 id="section-10-3">10.3 Phase 3: 智能化升级</h3>
        <ul>
            <li>AI能力增强</li>
            <li>大数据分析</li>
            <li>实时计算</li>
        </ul>

        <h3 id="section-10-4">10.4 Phase 4: 生态化扩展</h3>
        <ul>
            <li>开放平台</li>
            <li>API市场</li>
            <li>生态合作</li>
        </ul>

    </div>

    <script>
        // 添加平滑滚动
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // 添加代码块复制功能
        document.querySelectorAll('pre').forEach(pre => {
            const button = document.createElement('button');
            button.textContent = '复制';
            button.style.cssText = 'position: absolute; top: 5px; right: 5px; padding: 5px 10px; background: #1890ff; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 12px;';
            pre.style.position = 'relative';
            pre.appendChild(button);
            
            button.addEventListener('click', () => {
                const text = pre.textContent.replace('复制', '').trim();
                navigator.clipboard.writeText(text).then(() => {
                    button.textContent = '已复制!';
                    setTimeout(() => button.textContent = '复制', 2000);
                });
            });
        });
    </script>
</body>
</html>
